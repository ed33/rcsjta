# Introduction #

A test harness suite has been implemented in order to verify the API signature of the RCS API supported by a device and to avoid device fragmentation.

We have followed the best practices used by Google for its Android SDK, so we have built CTS tests dedicated to the RCS API (more info about CTS at http://source.android.com/compatibility/cts-intro.html).

This automatic test suit permits to:
- Verify the API signature: this permits for example to check if a device is Albatros or Blackbird or Crane compliant in terms of API signature.
- Verify the content providers: this permits to verify accessability (read/write), columns, etc.

# Details #

Source code is available from `./tests/cts` directory of your current branch:<br>
- <code>./tests/cts/signature/</code> is for testing API signature.<br>
- <code>./tests/cts/provider/</code> is for testing content providers of the API.<br>

See the following screenshot of a test which has failed because the API signature is not compliant (missing method and parameter):<br>
<br>
<img src='https://rcsjta.googlecode.com/git/docs/website/test_harness_ko.png' />

See another test which is successful:<br>
<br>
<img src='https://rcsjta.googlecode.com/git/docs/website/test_harness_ok.png' />

<h1>Implementation</h1>

<b>For API signature test suite:</b><br>
The API reference signature is defined into an XML file located in the directory <code>res/xml/</code>. There is one file per RCS release (Albatros, Blackbird, etc.) and the default RCS release is hardcoded in the class <code>ToTest.java</code>. Then the CTS test suite will compare the current API of the device with this reference signature.<br>
This XML file is copied from rcsjta/doclava/reference/current.xml.<br>
This current XML file is generated by doclava once the API is approved.<br>
<br>
<b>For content provider test suite:</b><br>
There is one JUnit test per content provider to be tested (Chat, FT, Image sharing, .etc).<br>
<br>
<h1>Run CTS test</h1>

Prerequisites: install the Android SDK (ie. ADT) from <a href='http://developer.android.com/sdk/index.html'>http://developer.android.com/sdk/index.html</a>.<br>
<br>
Use the script <code>run-test</code> from your directory <code>./tests</code> or launch testcases from your IDE (ie. ADT Eclipse):<br>
<br>
1) Create an Android project.<br>
2) Run as Android JUnit test.<br>
3) Test result appears in the window "Junit".<br>